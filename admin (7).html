<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jet One ‚Äî Admin</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root{--black:#0a0a0a;--white:#f5f5f0;--g1:#1a1a1a;--g2:#2e2e2e;--g3:#555;--g4:#999;--g5:#ccc;}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:var(--black);color:var(--white);font-family:'Montserrat',sans-serif;font-weight:300;min-height:100vh;cursor:none;}

  /* CURSOR */
  #cur{width:7px;height:7px;background:var(--white);border-radius:50%;position:fixed;pointer-events:none;z-index:9999;mix-blend-mode:difference;transform:translate(-50%,-50%);}
  #cur-ring{width:34px;height:34px;border:1px solid rgba(245,245,240,.4);border-radius:50%;position:fixed;pointer-events:none;z-index:9998;mix-blend-mode:difference;transform:translate(-50%,-50%);transition:width .3s,height .3s,border-color .3s;}
  body:has(button:hover) #cur-ring{width:54px;height:54px;border-color:var(--white);}

  /* LOGIN */
  #login-screen{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px;}
  .login-box{background:var(--g1);border:1px solid var(--g2);padding:60px;max-width:400px;width:100%;text-align:center;animation:up .7s ease both;}
  @keyframes up{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  .login-logo{font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:300;letter-spacing:.35em;text-transform:uppercase;margin-bottom:8px;}
  .login-sub{font-size:.6rem;letter-spacing:.35em;text-transform:uppercase;color:var(--g4);margin-bottom:48px;}
  .login-box label{display:block;font-size:.6rem;letter-spacing:.2em;text-transform:uppercase;color:var(--g4);margin-bottom:10px;text-align:left;}
  .login-box input{width:100%;background:var(--g2);border:1px solid var(--g2);color:var(--white);padding:14px 16px;font-family:'Montserrat',sans-serif;font-size:.85rem;outline:none;transition:border-color .3s;margin-bottom:22px;}
  .login-box input:focus{border-color:var(--white);}
  .login-btn{width:100%;padding:14px;background:var(--white);color:var(--black);border:none;font-size:.68rem;letter-spacing:.28em;text-transform:uppercase;cursor:pointer;font-family:'Montserrat',sans-serif;font-weight:500;transition:all .3s;}
  .login-btn:hover{background:var(--g5);}
  .login-err{color:#e55;font-size:.72rem;margin-top:16px;display:none;}

  /* DASHBOARD */
  #dashboard{display:none;min-height:100vh;}
  #dashboard.show{display:block;animation:up .5s ease both;}

  /* TOP BAR */
  .topbar{padding:22px 56px;border-bottom:1px solid var(--g2);display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;background:rgba(10,10,10,.97);backdrop-filter:blur(8px);z-index:100;}
  .tb-left{display:flex;align-items:center;gap:32px;}
  .tb-logo{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:300;letter-spacing:.3em;text-transform:uppercase;}
  .tb-badge{font-size:.58rem;letter-spacing:.2em;text-transform:uppercase;color:var(--g4);border:1px solid var(--g2);padding:4px 12px;}
  .tb-right{display:flex;align-items:center;gap:16px;}
  .tb-refresh{padding:9px 20px;background:none;border:1px solid var(--g2);color:var(--g4);font-size:.62rem;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;font-family:'Montserrat',sans-serif;transition:all .3s;}
  .tb-refresh:hover{border-color:var(--white);color:var(--white);}
  .tb-logout{padding:9px 20px;background:var(--white);color:var(--black);border:none;font-size:.62rem;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;font-family:'Montserrat',sans-serif;transition:all .3s;}
  .tb-logout:hover{background:var(--g5);}
  .tb-store{padding:9px 20px;background:none;border:1px solid var(--g2);color:var(--g4);font-size:.62rem;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;font-family:'Montserrat',sans-serif;transition:all .3s;text-decoration:none;display:inline-block;}
  .tb-store:hover{border-color:var(--white);color:var(--white);}

  /* STATS */
  .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:2px;margin:2px;}
  .stat{background:var(--g1);padding:36px 40px;border-left:2px solid transparent;transition:border-color .3s;}
  .stat:hover{border-color:var(--white);}
  .stat-val{font-family:'Cormorant Garamond',serif;font-size:2.8rem;font-weight:300;margin-bottom:6px;}
  .stat-lbl{font-size:.6rem;letter-spacing:.22em;text-transform:uppercase;color:var(--g4);}

  /* MAIN CONTENT */
  .content{padding:40px 56px;}

  /* TABS */
  .tabs{display:flex;border-bottom:1px solid var(--g2);margin-bottom:36px;}
  .tab{padding:14px 30px;font-size:.63rem;letter-spacing:.18em;text-transform:uppercase;background:none;border:none;color:var(--g4);cursor:pointer;font-family:'Montserrat',sans-serif;transition:color .3s;border-bottom:2px solid transparent;margin-bottom:-1px;}
  .tab:hover{color:var(--white);}
  .tab.on{color:var(--white);border-bottom-color:var(--white);}

  /* SEARCH */
  .toolbar{display:flex;gap:12px;margin-bottom:28px;align-items:center;}
  .search-box{flex:1;max-width:320px;background:var(--g1);border:1px solid var(--g2);color:var(--white);padding:11px 16px;font-family:'Montserrat',sans-serif;font-size:.8rem;outline:none;transition:border-color .3s;}
  .search-box:focus{border-color:var(--white);}
  .search-box::placeholder{color:var(--g4);}

  /* TABLE */
  table{width:100%;border-collapse:collapse;}
  thead th{text-align:left;font-size:.58rem;letter-spacing:.2em;text-transform:uppercase;color:var(--g4);padding:14px 18px;border-bottom:1px solid var(--g2);font-weight:400;white-space:nowrap;}
  tbody td{padding:18px 18px;border-bottom:1px solid rgba(255,255,255,.04);font-size:.79rem;color:var(--g5);vertical-align:middle;}
  tbody tr{transition:background .2s;}
  tbody tr:hover td{background:rgba(255,255,255,.025);}
  .order-id{font-family:'Cormorant Garamond',serif;font-size:1rem;color:var(--white);}
  .cust-name{font-size:.83rem;color:var(--white);margin-bottom:2px;}
  .cust-phone{font-size:.68rem;color:var(--g4);}
  .prod-name{font-size:.83rem;margin-bottom:2px;}
  .prod-detail{font-size:.67rem;color:var(--g4);}
  .price-val{font-family:'Cormorant Garamond',serif;font-size:1.05rem;color:var(--white);}

  /* STATUS BADGES */
  .badge{display:inline-block;padding:4px 12px;font-size:.58rem;letter-spacing:.12em;text-transform:uppercase;}
  .b-new{background:var(--white);color:var(--black);}
  .b-processing{background:transparent;border:1px solid var(--g3);color:var(--g5);}
  .b-done{background:transparent;border:1px solid var(--g3);color:var(--g4);}
  .b-cancelled{background:transparent;border:1px solid #c44;color:#c44;}

  /* ACTIONS */
  .act{padding:5px 12px;font-size:.58rem;letter-spacing:.1em;border:1px solid var(--g2);background:none;color:var(--g4);cursor:pointer;font-family:'Montserrat',sans-serif;transition:all .3s;margin-right:5px;}
  .act:hover{border-color:var(--white);color:var(--white);}
  .act.del:hover{border-color:#c44;color:#c44;}

  /* EMPTY */
  .empty{text-align:center;padding:80px 20px;color:var(--g4);}
  .empty p{font-size:.8rem;letter-spacing:.1em;}
  .empty-ico{font-size:2.5rem;margin-bottom:16px;opacity:.4;}

  /* LOADING */
  .loading{text-align:center;padding:60px;color:var(--g4);}
  .spinner{width:28px;height:28px;border:1px solid var(--g2);border-top-color:var(--white);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 20px;}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* NOTIF */
  .notif{position:fixed;bottom:26px;right:26px;background:var(--white);color:var(--black);padding:13px 24px;font-size:.7rem;letter-spacing:.1em;z-index:9000;transform:translateY(80px);opacity:0;transition:all .4s ease;}
  .notif.show{transform:translateY(0);opacity:1;}

  /* DETAIL MODAL */
  .ov{position:fixed;inset:0;background:rgba(10,10,10,.96);z-index:3000;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s;}
  .ov.open{opacity:1;pointer-events:all;}
  .modal{background:var(--g1);border:1px solid var(--g2);padding:50px;max-width:480px;width:92%;max-height:90vh;overflow-y:auto;position:relative;transform:translateY(24px);transition:transform .4s;}
  .ov.open .modal{transform:translateY(0);}
  .mx{position:absolute;top:20px;right:20px;background:none;border:none;color:var(--g4);font-size:1.1rem;cursor:pointer;transition:color .3s;}
  .mx:hover{color:var(--white);}
  .dl{display:flex;justify-content:space-between;align-items:flex-start;padding:12px 0;border-bottom:1px solid var(--g2);}
  .dl:last-child{border-bottom:none;}
  .dl-k{font-size:.6rem;letter-spacing:.18em;text-transform:uppercase;color:var(--g4);}
  .dl-v{font-size:.82rem;text-align:right;max-width:60%;}

  @media(max-width:900px){
    .topbar{padding:16px 22px;flex-wrap:wrap;gap:12px;}
    .stats{grid-template-columns:1fr 1fr;}
    .content{padding:28px 22px;}
    table{font-size:.72rem;}
    thead th,tbody td{padding:12px 10px;}
  }
</style>
</head>
<body>

<div id="cur"></div>
<div id="cur-ring"></div>
<div class="notif" id="notif"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê √âCRAN DE CONNEXION ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="login-screen">
  <div class="login-box">
    <p class="login-logo">JET ONE</p>
    <p class="login-sub">Panneau d'administration</p>
    <label>Mot de passe</label>
    <input type="password" id="pw-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')login()">
    <button class="login-btn" onclick="login()">Acc√©der au tableau de bord</button>
    <p class="login-err" id="login-err">Mot de passe incorrect.</p>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TABLEAU DE BORD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="dashboard">

  <div class="topbar">
    <div class="tb-left">
      <span class="tb-logo">JET ONE</span>
      <span class="tb-badge">Administration</span>
    </div>
    <div class="tb-right">
      <a class="tb-store" href="index.html" target="_blank">‚Üê Boutique</a>
      <button class="tb-refresh" onclick="loadOrders()">‚Üª Actualiser</button>
      <button class="tb-logout" onclick="logout()">D√©connexion</button>
    </div>
  </div>

  <!-- STATS -->
  <div class="stats">
    <div class="stat">
      <div class="stat-val" id="s-total">‚Äî</div>
      <div class="stat-lbl">Commandes totales</div>
    </div>
    <div class="stat">
      <div class="stat-val" id="s-new">‚Äî</div>
      <div class="stat-lbl">Nouvelles</div>
    </div>
    <div class="stat">
      <div class="stat-val" id="s-processing">‚Äî</div>
      <div class="stat-lbl">En traitement</div>
    </div>
    <div class="stat">
      <div class="stat-val" id="s-revenue">‚Äî</div>
      <div class="stat-lbl">Chiffre d'affaires (DZD)</div>
    </div>
  </div>

  <div class="content">
    <!-- TABS -->
    <div class="tabs">
      <button class="tab on" onclick="setTab('all',this)">Toutes</button>
      <button class="tab" onclick="setTab('new',this)">Nouvelles</button>
      <button class="tab" onclick="setTab('processing',this)">En traitement</button>
      <button class="tab" onclick="setTab('done',this)">Termin√©es</button>
      <button class="tab" onclick="setTab('cancelled',this)">Annul√©es</button>
    </div>

    <!-- TOOLBAR -->
    <div class="toolbar">
      <input class="search-box" id="search" placeholder="Rechercher par nom, produit, wilaya..." oninput="renderTable()">
    </div>

    <!-- TABLE CONTAINER -->
    <div id="table-wrap"></div>
  </div>
</div>

<!-- DETAIL MODAL -->
<div class="ov" id="ov-detail">
  <div class="modal">
    <button class="mx" onclick="closeDetail()">‚úï</button>
    <p style="font-family:'Cormorant Garamond',serif;font-size:1.9rem;font-weight:300;margin-bottom:6px;">D√©tails</p>
    <p style="font-size:.62rem;letter-spacing:.15em;color:var(--g4);text-transform:uppercase;margin-bottom:28px;" id="detail-id">‚Äî</p>
    <div id="detail-body"></div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONFIG ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üî¥ Mets ton URL Apps Script ici (m√™me que index.html) :
const GAS_URL  = 'COLLE_TON_URL_ICI';
const ADMIN_PW = 'jetone2025'; // üî¥ Change ce mot de passe !

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê √âTAT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let allOrders = [];
let curTab    = 'all';
let isLoggedIn= false;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CURSEUR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const cur=document.getElementById('cur'),ring=document.getElementById('cur-ring');
let mx=0,my=0,rx=0,ry=0;
document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;cur.style.left=mx+'px';cur.style.top=my+'px';});
(function a(){rx+=(mx-rx)*.1;ry+=(my-ry)*.1;ring.style.left=rx+'px';ring.style.top=ry+'px';requestAnimationFrame(a);})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê AUTH ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function login(){
  const pw=document.getElementById('pw-input').value;
  if(pw===ADMIN_PW){
    isLoggedIn=true;
    document.getElementById('login-screen').style.display='none';
    document.getElementById('dashboard').classList.add('show');
    loadOrders();
  } else {
    document.getElementById('login-err').style.display='block';
    document.getElementById('pw-input').style.borderColor='#c44';
    setTimeout(()=>{
      document.getElementById('login-err').style.display='none';
      document.getElementById('pw-input').style.borderColor='var(--g2)';
    },3000);
  }
}
function logout(){
  isLoggedIn=false;
  document.getElementById('dashboard').classList.remove('show');
  document.getElementById('login-screen').style.display='flex';
  document.getElementById('pw-input').value='';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CHARGEMENT COMMANDES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function loadOrders(){
  document.getElementById('table-wrap').innerHTML=`<div class="loading"><div class="spinner"></div><p>Chargement des commandes...</p></div>`;
  
  // Try Google Sheets first
  if(GAS_URL !== 'COLLE_TON_URL_ICI'){
    try{
      const res=await fetch(`${GAS_URL}?password=${encodeURIComponent(ADMIN_PW)}`);
      const data=await res.json();
      if(data.success && data.orders){
        allOrders=data.orders;
        updateStats();
        renderTable();
        return;
      }
    }catch(e){ notify('Erreur Google Sheets ‚Äî affichage local.'); }
  }

  // Fallback: localStorage
  allOrders=JSON.parse(localStorage.getItem('jt-orders')||'[]');
  updateStats();
  renderTable();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STATS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateStats(){
  const total  = allOrders.length;
  const newN   = allOrders.filter(o=>o.status==='new'||!o.status).length;
  const proc   = allOrders.filter(o=>o.status==='processing').length;
  const rev    = allOrders.filter(o=>o.status!=='cancelled').reduce((s,o)=>s+(parseFloat(o.total)||0),0);
  document.getElementById('s-total').textContent=total;
  document.getElementById('s-new').textContent=newN;
  document.getElementById('s-processing').textContent=proc;
  document.getElementById('s-revenue').textContent=rev.toLocaleString('fr-DZ');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TABLEAU ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setTab(tab,btn){
  curTab=tab;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
  btn.classList.add('on');
  renderTable();
}

function renderTable(){
  const q=document.getElementById('search').value.toLowerCase();
  let orders=allOrders;

  // Filter by tab
  if(curTab!=='all') orders=orders.filter(o=>{
    const s=o.status||'new';
    return s===curTab;
  });

  // Filter by search
  if(q) orders=orders.filter(o=>
    (o.customer||'').toLowerCase().includes(q)||
    (o.product||'').toLowerCase().includes(q)||
    (o.wilaya||'').toLowerCase().includes(q)||
    (o.id||'').toLowerCase().includes(q)||
    (o.phone||'').includes(q)
  );

  if(!orders.length){
    document.getElementById('table-wrap').innerHTML=`
      <div class="empty">
        <div class="empty-ico">üìã</div>
        <p>Aucune commande trouv√©e.</p>
      </div>`;
    return;
  }

  document.getElementById('table-wrap').innerHTML=`
    <table>
      <thead>
        <tr>
          <th>R√©f.</th>
          <th>Date</th>
          <th>Cliente</th>
          <th>Produit</th>
          <th>Wilaya</th>
          <th>Total</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        ${orders.map(o=>`
          <tr onclick="viewDetail('${o.id}')" style="cursor:pointer;">
            <td><span class="order-id">${o.id||'‚Äî'}</span></td>
            <td>${o.date||'‚Äî'}<br><span style="font-size:.65rem;color:var(--g4);">${o.time||''}</span></td>
            <td>
              <div class="cust-name">${o.customer||'‚Äî'}</div>
              <div class="cust-phone">${o.phone||'‚Äî'}</div>
            </td>
            <td>
              <div class="prod-name">${o.product||'‚Äî'}</div>
              <div class="prod-detail">Taille : ${o.size||'?'} ¬∑ Qt√© : ${o.qty||1}</div>
            </td>
            <td>${o.wilaya||'‚Äî'}</td>
            <td><span class="price-val">${(parseFloat(o.total)||0).toLocaleString('fr-DZ')} DZD</span></td>
            <td><span class="badge b-${o.status||'new'}">${statusLabel(o.status||'new')}</span></td>
            <td onclick="event.stopPropagation()">
              ${(o.status||'new')==='new'?`<button class="act" onclick="setStatus('${o.id}','processing')">Traiter</button>`:''}
              ${(o.status||'new')==='processing'?`<button class="act" onclick="setStatus('${o.id}','done')">Terminer</button>`:''}
              ${(o.status||'new')==='new'||o.status==='processing'?`<button class="act" onclick="setStatus('${o.id}','cancelled')">Annuler</button>`:''}
              <button class="act del" onclick="delOrder('${o.id}')">Suppr.</button>
            </td>
          </tr>`).join('')}
      </tbody>
    </table>`;
}

function statusLabel(s){ return {new:'Nouvelle',processing:'En cours',done:'Termin√©e',cancelled:'Annul√©e'}[s]||s; }

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ACTIONS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function setStatus(id,status){
  // Update locally
  const o=allOrders.find(x=>x.id===id);
  if(o) o.status=status;
  updateLocalStorage();
  updateStats();
  renderTable();
  notify('Statut mis √† jour.');

  // Sync Google Sheets
  if(GAS_URL!=='COLLE_TON_URL_ICI'){
    try{
      await fetch(GAS_URL,{
        method:'POST',
        body:JSON.stringify({action:'update_status',orderId:id,status,password:ADMIN_PW})
      });
    }catch(e){}
  }
}

async function delOrder(id){
  if(!confirm('Supprimer cette commande ?')) return;
  allOrders=allOrders.filter(o=>o.id!==id);
  updateLocalStorage();
  updateStats();
  renderTable();
  notify('Commande supprim√©e.');

  if(GAS_URL!=='COLLE_TON_URL_ICI'){
    try{
      await fetch(GAS_URL,{
        method:'POST',
        body:JSON.stringify({action:'delete_order',orderId:id,password:ADMIN_PW})
      });
    }catch(e){}
  }
}

function updateLocalStorage(){
  localStorage.setItem('jt-orders',JSON.stringify(allOrders));
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê D√âTAIL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function viewDetail(id){
  const o=allOrders.find(x=>x.id===id);
  if(!o) return;
  document.getElementById('detail-id').textContent=o.id;
  document.getElementById('detail-body').innerHTML=[
    ['Cliente',o.customer],['T√©l√©phone',o.phone],['Wilaya',o.wilaya],
    ['Adresse',o.address],['Produit',o.product],['Taille',o.size],
    ['Quantit√©',o.qty],['Prix unitaire',(o.price||0).toLocaleString('fr-DZ')+' DZD'],
    ['Total',(o.total||0).toLocaleString('fr-DZ')+' DZD'],
    ['Date',o.date+' '+( o.time||'')],['Notes',o.notes||'‚Äî'],
    ['Statut',statusLabel(o.status||'new')]
  ].map(([k,v])=>`<div class="dl"><span class="dl-k">${k}</span><span class="dl-v">${v||'‚Äî'}</span></div>`).join('');
  document.getElementById('ov-detail').classList.add('open');
}
function closeDetail(){ document.getElementById('ov-detail').classList.remove('open'); }
document.getElementById('ov-detail').addEventListener('click',e=>{ if(e.target===document.getElementById('ov-detail')) closeDetail(); });

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NOTIF ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function notify(m){ const n=document.getElementById('notif');n.textContent=m;n.classList.add('show');setTimeout(()=>n.classList.remove('show'),3000); }

// Auto-refresh every 60s when dashboard open
setInterval(()=>{ if(isLoggedIn) loadOrders(); },60000);
</script>
</body>
</html>
